"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{4423:function(e,t,n){n.d(t,{$:function(){return D}});var a=n(7437),l=n(2265),r=n(9501),i=n(3590),o=n(1115),s=n(2381),d=n(279),c=n(3448),m=n(7053);let u=l.createContext({}),x=e=>{let{...t}=e;return(0,a.jsx)(u.Provider,{value:{name:t.name},children:(0,a.jsx)(r.Qr,{...t})})},p=()=>{let e=l.useContext(u),{getFieldState:t,formState:n}=(0,r.Gc)(),a=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");return{name:e.name,...a}};function b(e){let{children:t,className:n,form:l,...i}=e;return(0,a.jsx)(r.RV,{...l,children:(0,a.jsx)("form",{className:(0,c.cn)("space-y-6",n),autoComplete:"off",...i,children:t})})}function h(e){let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,c.cn)("mb-2 rounded-lg bg-gradient-to-r from-blue-50 via-pink-50 to-yellow-50 dark:from-zinc-800 dark:via-zinc-900 dark:to-zinc-800 p-3",t),...n})}function g(e){let{className:t,...n}=e;return(0,a.jsx)("label",{className:(0,c.cn)("block text-base font-semibold mb-1",t),...n})}function f(e){let{...t}=e,{error:n,name:l}=p();return(0,a.jsx)(m.g7,{id:l,"aria-invalid":!!n,...t})}function v(e){let{className:t,...n}=e,{error:l}=p(),r=l?String(null==l?void 0:l.message):n.children;return r?(0,a.jsx)("div",{className:(0,c.cn)("text-xs text-red-600 mt-1",t),...n,children:r}):null}f.displayName="AppFormControl",v.displayName="AppFormMessage";var j=n(1245),k=n(3340),y=n(3671),w=n(5978),N=n(6410);let z=["Mechanical","Electrical","Production","Quality","Other"],C=o.z.object({complaintId:o.z.string(),complaintDate:o.z.string(),machineName:o.z.string().min(1,"Machine name is required"),complaintDescription:o.z.string().min(1,"Description is required"),priority:o.z.enum(["Low","Medium","High"]),complaintStatus:o.z.enum(["Open","In Progress","Closed","Pending Parts"]).default("Open"),actionDate:o.z.string().nullable().default(null),maintenanceRemarks:o.z.string().nullable().default(null),initialInspectionDate:o.z.string().nullable().default(null),estimatedEndDate:o.z.string().nullable().default(null),finalizationDate:o.z.string().nullable().default(null),createdBy:o.z.string().email("Valid email required"),department:o.z.string().min(1,"Department is required"),assignedTo:o.z.enum(["Person A","Person B","Person C","Person D"]).default("Person A"),materialsUsed:o.z.array(o.z.object({name:o.z.string().min(1,"Material name required"),quantity:o.z.string().min(1,"Quantity required"),remarks:o.z.string().optional()})).default([]),history:o.z.array(o.z.object({action:o.z.string(),user:o.z.string(),timestamp:o.z.string()})).default([])}),I=e=>"complaint"===e?[{name:"-",quantity:"-",remarks:"-"}]:[{name:"",quantity:"",remarks:""}];function D(e){let{onSuccess:t,complaint:n}=e,{currentUser:o,loading:c}=(0,j.a)(),{toast:m}=(0,k.p)(),[u,p]=(0,l.useState)(!1),[D,S]=(0,l.useState)((null==n?void 0:n.materialsUsed)||I((null==o?void 0:o.role)||"")),[F,P]=(0,l.useState)((null==n?void 0:n.department)||"Mechanical"),[A,U]=(0,l.useState)((null==n?void 0:n.history)||[]),[E,R]=(0,l.useState)((null==n?void 0:n.complaintId)||"");(0,l.useEffect)(()=>{console.log("[ComplaintForm] Render. currentUser:",o,"loading:",c)}),(0,l.useEffect)(()=>{(async function(){if(n)return;let e=(0,w.hJ)(N.db,"complaints"),t=(0,w.IO)(e,(0,w.Xo)("complaintId","desc"),(0,w.b9)(1)),a=await (0,w.PL)(t),l=1;if(!a.empty){let e=a.docs[0].data().complaintId,t=e&&e.match(/AIRTECH-(\d+)/);t&&(l=parseInt(t[1],10)+1)}let r="AIRTECH-".concat(String(l).padStart(2,"0"));R(r),q.setValue("complaintId",r)})()},[n]);let q=(0,r.cI)({resolver:(0,i.F)(C),defaultValues:{complaintId:(null==n?void 0:n.complaintId)||"",complaintDate:(null==n?void 0:n.complaintDate)||new Date().toISOString().split("T")[0],machineName:(null==n?void 0:n.machineName)||"",complaintDescription:(null==n?void 0:n.complaintDescription)||"",priority:(null==n?void 0:n.priority)||"Low",complaintStatus:(null==n?void 0:n.complaintStatus)||"Open",actionDate:(null==n?void 0:n.actionDate)||null,maintenanceRemarks:(null==n?void 0:n.maintenanceRemarks)||null,initialInspectionDate:(null==n?void 0:n.initialInspectionDate)||null,estimatedEndDate:(null==n?void 0:n.estimatedEndDate)||null,finalizationDate:(null==n?void 0:n.finalizationDate)||null,createdBy:(null==n?void 0:n.createdBy)||(null==o?void 0:o.email)||"",department:(null==n?void 0:n.department)||"",assignedTo:(null==n?void 0:n.assignedTo)||"Person A",materialsUsed:(null==n?void 0:n.materialsUsed)||I((null==o?void 0:o.role)||""),history:(null==n?void 0:n.history)||[]}}),M=async e=>{if(console.group("[ComplaintForm] onSubmit Debug"),console.log("currentUser:",o),console.log("form data:",e),!o||!o.email||!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(o.email)){m({title:"Error",description:"You must be logged in with a valid email to submit a complaint.",variant:"destructive"}),console.warn("Submission blocked: invalid or missing user/email",o),console.groupEnd();return}p(!0);try{let a;let l=new Date().toISOString(),r=o.email,i=[];(i=n?[...Array.isArray(n.history)?n.history:[],{action:"Updated",user:r,timestamp:l}]:[{action:"Created",user:r,timestamp:l}])&&0!==i.length||(i=[{action:"Created",user:r,timestamp:l}]);let s={...e,assignedTo:e.assignedTo,createdBy:r,department:e.department,materialsUsed:D,history:i};if(console.log("Submitting payload:",s),a=(null==n?void 0:n.id)?await (0,y.Rw)(n.id,s):await (0,y.GH)(s),console.log("Submission result:",a),a.success)m({title:"Success",description:a.message}),q.reset(),t(),console.info("Complaint submitted successfully:",{payload:s,result:a,user:o,time:new Date().toISOString()});else{let e="object"==typeof a.error?JSON.stringify(a.error):a.error;m({title:"Error",description:e||a.message||"Submission failed",variant:"destructive"}),console.error("Backend error:",a.message,e)}}catch(e){console.error("Submission error:",e),m({title:"Error",description:(null==e?void 0:e.message)||"An unexpected error occurred",variant:"destructive"})}finally{p(!1),console.groupEnd()}};return c?(console.log("[ComplaintForm] AuthContext loading, not rendering form."),(0,a.jsx)("div",{className:"mb-4 p-4 bg-blue-100 text-blue-800 rounded text-center font-semibold animate-pulse",children:"Checking login status..."})):null==o?(console.warn("[ComplaintForm] currentUser is null, blocking form."),(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded text-center font-semibold",children:"You must be logged in to submit a complaint."})):"viewer"===o.role?(console.warn("[ComplaintForm] currentUser.role is viewer, blocking form."),(0,a.jsx)("div",{className:"mb-4 p-4 bg-yellow-100 text-yellow-800 rounded text-center font-semibold",children:"You do not have permission to submit a complaint."})):(0,a.jsx)(b,{form:q,onSubmit:q.handleSubmit(M),children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto bg-white dark:bg-zinc-900 rounded-2xl shadow-lg p-8 border border-zinc-200 dark:border-zinc-800 mt-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-primary mb-6 text-center tracking-tight",children:"Complaint Form"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 bg-gradient-to-r from-blue-50 via-pink-50 to-yellow-50 dark:from-zinc-800 dark:via-zinc-900 dark:to-zinc-800 rounded-xl p-6 mb-4",children:[(0,a.jsx)(x,{control:q.control,name:"complaintId",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-blue-700 dark:text-blue-300",children:"Complaint ID"}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{...t,id:t.name,name:t.name,readOnly:!0,className:"bg-blue-100 dark:bg-zinc-800 font-semibold text-blue-900 dark:text-blue-200"})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"complaintDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-pink-700 dark:text-pink-300",children:"Complaint Date"}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{type:"date",...t,id:t.name,name:t.name,className:"bg-pink-100 dark:bg-zinc-800 text-pink-900 dark:text-pink-200",disabled:"complaint"===o.role&&!1})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"machineName",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-yellow-700 dark:text-yellow-300",children:"Machine Name"}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{...t,id:t.name,name:t.name,className:"bg-yellow-100 dark:bg-zinc-800 text-yellow-900 dark:text-yellow-200",disabled:"complaint"!==o.role&&!1})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"complaintDescription",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{className:"md:col-span-2",children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-purple-700 dark:text-purple-300",children:"Description"}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{...t,id:t.name,name:t.name,className:"bg-purple-100 dark:bg-zinc-800 text-purple-900 dark:text-purple-200",disabled:"complaint"!==o.role&&!1})}),(0,a.jsx)(v,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(x,{control:q.control,name:"priority",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-red-700 dark:text-red-300",children:"Priority"}),(0,a.jsx)(f,{children:(0,a.jsxs)("select",{...t,id:t.name,name:t.name,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black",disabled:"complaint"!==o.role&&!1,children:[(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"})]})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"complaintStatus",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-green-700 dark:text-green-300",children:"Status"}),(0,a.jsx)(f,{children:(0,a.jsxs)("select",{...t,id:t.name,name:t.name,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400 bg-white text-black",required:!0,disabled:"complaint"===o.role,children:[(0,a.jsx)("option",{value:"Open",children:"Open"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Closed",children:"Closed"}),(0,a.jsx)("option",{value:"Pending Parts",children:"Pending Parts"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"actionDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsxs)(g,{htmlFor:t.name,children:["Action Date ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Date when action was/will be taken)"})]}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{type:"date",...t,id:t.name,name:t.name,value:t.value||"",disabled:"complaint"===o.role})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"maintenanceRemarks",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,children:"Maintenance Remarks"}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{...t,id:t.name,name:t.name,value:t.value||"",disabled:"complaint"===o.role})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"initialInspectionDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsxs)(g,{htmlFor:t.name,children:["Initial Inspection Date ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(First check/inspection date)"})]}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{type:"date",...t,id:t.name,name:t.name,value:t.value||"",disabled:"complaint"===o.role})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"estimatedEndDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsxs)(g,{htmlFor:t.name,children:["Estimated End Date ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Expected completion date)"})]}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{type:"date",...t,id:t.name,name:t.name,value:t.value||"",disabled:"complaint"===o.role})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"finalizationDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsxs)(g,{htmlFor:t.name,children:["Finalization Date ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Date when complaint was fully resolved)"})]}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{type:"date",...t,id:t.name,name:t.name,value:t.value||"",disabled:"complaint"===o.role})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"createdBy",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,children:"Created By (Email)"}),(0,a.jsx)(f,{children:(0,a.jsx)(d.I,{type:"email",...t,id:t.name,name:t.name,value:t.value||"",readOnly:!0})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"department",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{htmlFor:t.name,className:"text-indigo-700 dark:text-indigo-300",children:"Concerned Department"}),(0,a.jsx)(f,{children:(0,a.jsx)("select",{...t,id:t.name,name:t.name,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black",disabled:"complaint"!==o.role&&!1,children:z.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})}),(0,a.jsx)(v,{})]})}}),(0,a.jsx)(x,{control:q.control,name:"assignedTo",render:e=>{let{field:t}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"text-blue-700 dark:text-blue-300",children:"Assigned To"}),(0,a.jsx)(f,{children:(0,a.jsxs)("select",{...t,className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white text-black",disabled:"complaint"===o.role,children:[(0,a.jsx)("option",{value:"Person A",children:"Person A"}),(0,a.jsx)("option",{value:"Person B",children:"Person B"}),(0,a.jsx)("option",{value:"Person C",children:"Person C"}),(0,a.jsx)("option",{value:"Person D",children:"Person D"})]})}),(0,a.jsx)(v,{})]})}})]}),(0,a.jsxs)("div",{className:"md:col-span-2 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-pink-700 dark:text-pink-300 mb-2",children:"Materials Used"}),(0,a.jsxs)("div",{className:"space-y-2",children:[D.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,a.jsx)("label",{htmlFor:"material-name-".concat(t),className:"block text-xs font-semibold mb-1",children:"Material Name"}),(0,a.jsx)(d.I,{id:"material-name-".concat(t),name:"materialsUsed.".concat(t,".name"),placeholder:"Material Name",value:"complaint"===o.role?"-":e.name,onChange:e=>{if("complaint"!==o.role){let n=[...D];n[t].name=e.target.value,S(n),q.setValue("materialsUsed",n)}},className:"bg-blue-50 dark:bg-zinc-800",required:!0,disabled:"complaint"===o.role})]}),(0,a.jsxs)("div",{className:"flex flex-col w-1/4",children:[(0,a.jsx)("label",{htmlFor:"material-quantity-".concat(t),className:"block text-xs font-semibold mb-1",children:"Quantity"}),(0,a.jsx)(d.I,{id:"material-quantity-".concat(t),name:"materialsUsed.".concat(t,".quantity"),placeholder:"Quantity",value:"complaint"===o.role?"-":e.quantity,onChange:e=>{if("complaint"!==o.role){let n=[...D];n[t].quantity=e.target.value,S(n),q.setValue("materialsUsed",n)}},className:"bg-yellow-50 dark:bg-zinc-800",required:!0,disabled:"complaint"===o.role})]}),(0,a.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,a.jsx)("label",{htmlFor:"material-remarks-".concat(t),className:"block text-xs font-semibold mb-1",children:"Remarks"}),(0,a.jsx)(d.I,{id:"material-remarks-".concat(t),name:"materialsUsed.".concat(t,".remarks"),placeholder:"Remarks",value:"complaint"===o.role?"-":e.remarks||"",onChange:e=>{if("complaint"!==o.role){let n=[...D];n[t].remarks=e.target.value,S(n),q.setValue("materialsUsed",n)}},className:"bg-pink-50 dark:bg-zinc-800",disabled:"complaint"===o.role})]}),(0,a.jsx)(s.z,{type:"button",variant:"destructive",size:"sm",onClick:()=>{if("complaint"!==o.role){let e=D.filter((e,n)=>n!==t);S(e),q.setValue("materialsUsed",e)}},disabled:1===D.length||"complaint"===o.role,children:"Remove"})]},t)),(0,a.jsx)(s.z,{type:"button",variant:"secondary",size:"sm",className:"bg-gradient-to-r from-blue-200 via-pink-200 to-yellow-200 dark:from-zinc-700 dark:via-zinc-800 dark:to-zinc-700 text-blue-900 dark:text-blue-200",onClick:()=>{if("complaint"!==o.role){let e=[...D,{name:"",quantity:"",remarks:""}];S(e),q.setValue("materialsUsed",e)}},disabled:"complaint"===o.role,children:"+ Add Material"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-700 dark:text-green-300 mb-2",children:"Complaint History"}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 via-blue-50 to-pink-50 dark:from-zinc-800 dark:via-zinc-900 dark:to-zinc-800 rounded p-3 max-h-40 overflow-y-auto text-xs",children:0===A.length?(0,a.jsx)("div",{className:"text-gray-500",children:"No history yet."}):A.map((e,t)=>(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsx)("span",{className:"font-semibold text-green-700 dark:text-green-300",children:e.action})," by ",(0,a.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:e.user})," on ",(0,a.jsx)("span",{className:"text-pink-700 dark:text-pink-300",children:new Date(e.timestamp).toLocaleString()})]},t))})]}),(0,a.jsx)("div",{className:"md:col-span-2 mt-8",children:(0,a.jsx)(s.z,{type:"submit",disabled:u||!(null==o?void 0:o.email),className:"w-full text-lg font-bold bg-gradient-to-r from-blue-500 via-pink-500 to-yellow-500 text-white shadow-lg hover:from-blue-600 hover:via-pink-600 hover:to-yellow-600",children:u?"Submitting...":n?"Update":"Submit"})})]})]})},(null==o?void 0:o.email)||"nouser")}},2381:function(e,t,n){n.d(t,{z:function(){return r}});var a=n(7437),l=n(3448);let r=n(2265).forwardRef((e,t)=>{let{className:n,variant:r="primary",size:i="md",...o}=e,s="";switch(r){case"primary":s="bg-gradient-to-r from-blue-500 via-pink-500 to-yellow-500 text-white shadow-lg rounded-lg hover:from-blue-600 hover:via-pink-600 hover:to-yellow-600";break;case"secondary":s="bg-gradient-to-r from-blue-200 via-pink-200 to-yellow-200 text-blue-900 dark:text-blue-200 rounded-lg hover:from-blue-300 hover:via-pink-300 hover:to-yellow-300";break;case"destructive":s="bg-red-600 text-white rounded-lg hover:bg-red-700";break;case"ghost":s="bg-transparent text-primary hover:bg-blue-50 dark:hover:bg-zinc-800 rounded-lg";break;case"outline":s="border border-blue-400 text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-900 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-800";break;default:s=""}let d="";switch(i){case"sm":d="px-3 py-1.5 text-sm";break;case"lg":d="px-6 py-3 text-lg";break;default:d="px-4 py-2 text-base"}return(0,a.jsx)("button",{ref:t,className:(0,l.cn)("inline-flex items-center justify-center font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",s,d,n),...o})});r.displayName="Button"},279:function(e,t,n){n.d(t,{I:function(){return i}});var a=n(7437),l=n(2265),r=n(3448);let i=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,a.jsx)("input",{ref:t,className:(0,r.cn)("block w-full rounded-lg border border-blue-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 px-4 py-2 text-base text-blue-900 dark:text-blue-200 placeholder:text-blue-400 dark:placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-150 shadow-sm","hover:border-pink-400 dark:hover:border-pink-400",n),...l})});i.displayName="Input"},1245:function(e,t,n){n.d(t,{AuthProvider:function(){return c},a:function(){return m}});var a=n(7437),l=n(2265),r=n(6410),i=n(3301),o=n(5978),s=n(3340);let d=(0,l.createContext)({currentUser:null,loading:!0,logout:async()=>{}});function c(e){let{children:t}=e,[n,c]=(0,l.useState)(null),[m,u]=(0,l.useState)(!0),{toast:x}=(0,s.p)();(0,l.useEffect)(()=>{let e=(0,i.Aj)(r.I,async e=>{if(console.log("[AuthContext] onAuthStateChanged:",e),e){var t,n;let a=(0,o.JU)(r.db,"users",e.uid),l=await (0,o.QT)(a),i=l.exists()?l.data():null;console.log("[AuthContext] Firestore userDoc:",i),c({uid:e.uid,email:e.email||(null==i?void 0:i.email)||null,role:null!==(t=null==i?void 0:i.role)&&void 0!==t?t:"viewer"}),console.log("[AuthContext] setCurrentUser:",{uid:e.uid,email:e.email||(null==i?void 0:i.email)||null,role:null!==(n=null==i?void 0:i.role)&&void 0!==n?n:"viewer"})}else c(null),console.log("[AuthContext] setCurrentUser: null");u(!1),console.log("[AuthContext] setLoading: false")});return()=>e()},[]);let p=async()=>{try{await (0,i.w7)(r.I),c(null),x({title:"Success",description:"Logged out successfully."})}catch(e){throw console.error("Logout error:",e),x({title:"Error",description:"Failed to log out.",variant:"destructive"}),e}};return(0,a.jsx)(d.Provider,{value:{currentUser:n,loading:m,logout:p},children:t})}function m(){return(0,l.useContext)(d)}},3340:function(e,t,n){n.d(t,{p:function(){return r}});var a=n(2265);(0,n(535).j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}});let l=0;function r(){let[e,t]=(0,a.useState)([]);return{toast:(0,a.useCallback)(e=>{let{variant:n,title:a,description:r,action:i,...o}=e,s=(l++).toString();return t(e=>[...e,{id:s,variant:n,title:a,description:r,action:i,...o}]),s},[]),dismiss:(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),update:(0,a.useCallback)((e,n)=>{let{variant:a,title:l,description:r,action:i,...o}=n;t(t=>t.map(t=>t.id===e?{...t,variant:a,title:l,description:r,action:i,...o}:t))},[]),toasts:e}}},3671:function(e,t,n){n.d(t,{GH:function(){return r},Rj:function(){return l},Rw:function(){return i}}),n(3079);var a=n(2119),l=(0,a.$)("b60ce4049ede2f842c41b009d4648ef01f0d914d"),r=(0,a.$)("4fcd0957814776ddeacd97d1f9bfc608d2d262ed"),i=(0,a.$)("1c9e169f8620cf50fdd5e1aa3069c8ca1f81564b")},6410:function(e,t,n){n.d(t,{I:function(){return s},db:function(){return d}});var a=n(738),l=n(3301),r=n(5978),i=n(62);let o=(0,a.ZF)({apiKey:"AIzaSyDBgH3vn2ec1FwRRkVIG5gAR9Jkno5VCR4",authDomain:"maintenance-flow-1c30c.firebaseapp.com",projectId:"maintenance-flow-1c30c",storageBucket:"maintenance-flow-1c30c.appspot.com",messagingSenderId:"116876204407",appId:"1:116876204407:web:7641e3dbb7a48cd69c6972"}),s=(0,l.v0)(o),d=(0,r.ad)(o);(0,i.cF)(o)},3448:function(e,t,n){n.d(t,{cn:function(){return r}});var a=n(1994),l=n(3335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.m6)((0,a.W)(t))}}}]);